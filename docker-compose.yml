version: "3.9"

services:
  nfofetch:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: nfofetch
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      # 浏览根目录（根据自己宿主机目录调整）
      - NFOFETCH_BROWSE_ROOT=/data/media
      # 可选：自定义 HTTP User-Agent，避免部分站点直接 403
      # - NFOFETCH_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:117.0) Gecko/20100101 Firefox/117.0
      # 可选：访问 javdb 时使用的 HTTP 代理，例如 http://127.0.0.1:7890
      # - NFOFETCH_HTTP_PROXY=http://127.0.0.1:7890
      # javdb Cookie（在宿主机上配置真实值，避免写死在镜像中）
      # - NFOFETCH_JAVDB_COOKIE="theme=auto; "
    volumes:
      # 挂载媒体库所在目录到容器内部，供浏览和写 NFO/图片（NFO 会生成在视频同目录）
      - /mnt/dnas:/data/media

